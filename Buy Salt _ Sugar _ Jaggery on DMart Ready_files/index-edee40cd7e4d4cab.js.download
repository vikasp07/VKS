(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{75557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(48859)}])},45301:function(e,t,n){"use strict";var r=n(85893),a=n(67294),o=n(45697),s=n.n(o),c=n(60378),l=n(8894),u=n(2653);function d(e){return(0,r.jsx)(r.Fragment,{children:(()=>{let{agent:t,user:n,userType:o,widgets:s=[],isAddon:d,isTopup:i}=e;return s.map((e,s)=>{let{meta:g={},content:h={}}=e,{template:p=""}=g;switch(p){case c.wY.BANNERS_SLIDER:return(0,r.jsx)(a.Fragment,{children:(0,r.jsx)(l.gY,{agent:t,content:h})},s);case c.wY.ANNOUNCEMENT:return(0,r.jsx)(l.I7,{isAddon:d,isTopup:i,meta:g,user:n,content:h},s);case c.wY.PRICING_BANNER_WIDGET:if(Object.keys(null==h?void 0:h.data).length)return(0,r.jsx)(l.Yb,{agent:t,content:h,meta:g},s);return null;case c.wY.BANNERS_HORIZONTAL:if(Object.keys(h.data).length)return(0,r.jsx)(l.YA,{agent:t,meta:g,content:h},s);return[];case c.wY.MULTI_BANNER:if(Object.keys(null==h?void 0:h.data).length)return(0,r.jsx)(l.MX,{agent:t,content:h,meta:g},s);return null;case c.wY.PRODUCT_LIST:if(Object.keys(h.data).length)return(0,r.jsx)(l.xy,{agent:t,content:h,meta:g},s);return[];case c.wY.RECENT_PURCHASES:return(0,r.jsx)(l.sO,{agent:t,user:n,meta:g,content:h},s);case c.wY.BANNERS_ROW:if(Object.keys(h.data).length)return(0,r.jsx)(a.Fragment,{children:(0,r.jsx)(l.jL,{agent:t,meta:g,content:h},s)},s);return[];case c.wY.BANNERS_COLUMN:if(Object.keys(h.data).length)return(0,r.jsx)(l.jL,{agent:t,meta:g,content:h},s);return[];case c.wY.CATEGORY:return(0,r.jsx)(l.Ue,{content:h},s);case c.wY.CURATED_RAILS:if(Object.keys(h.data).length)return(0,r.jsx)(l.Cp,{content:h,type:null==g?void 0:g.type,agent:t,meta:g},s);return[];case c.wY.CONTENT_CARD:if(Object.keys(h.data).length)return(0,r.jsx)(l.uW,{content:h,meta:g,agent:t},s);return[];case c.wY.PERSONALIZED:case c.wY.PERSONALIZED_WIDGET:var m;if((null==g?void 0:null===(m=g.usersType)||void 0===m?void 0:m.includes(o))||(null==g?void 0:g.usersType)===void 0)return(0,r.jsx)(l.OB,{agent:t,content:h,meta:g},s);return[];case c.wY.RICH_TEXT:return(0,r.jsx)(l.Ho,{content:h,meta:g},s);case c.wY.MEDIA_WIDGET:if(Object.keys(h.data).length)return(0,r.jsx)(l.Mx,{content:h,meta:g,agent:t},s);return null;case c.wY.RICH_TEXT_COL:if(Object.keys(h.data).length)return(0,r.jsx)(l.DL,{content:h,meta:g},s);return null;case c.wY.OFFER_BAND:if(Object.keys(h.data).length)return(0,r.jsx)(l.yM,{agent:t,content:h,meta:g,widget:h,toggleOfferDialog:e=>(0,u.fe)(e)},s);return null;default:return[]}})})()})}d.propTypes={agent:s().string,user:s().object,userType:s().string,widgets:s().array,isTopup:s().bool,isAddon:s().bool},d.defaultProps={agent:c.gN.WEB,user:{},userType:c.Wg.CURIOUS,widgets:[],isTopup:!1,isAddon:!1},t.Z=d},48859:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return b},default:function(){return A}});var r=n(85893),a=n(67294),o=n(45697),s=n.n(o),c=n(2664),l=n(60378),u=n(89836),d=n(45301),i=n(38459),g=n(3168),h=n(2962);function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsx)(h.ns,{...e})}p.propTypes={data:s().object},p.defaultProps={data:{}};var m=n(45931),f=n(30927),v=n(72621),_=n(64157);n(36302);var y=n(91359),I=n(69026),U=n(55252),E=n(99653),j=n(82413),w=n(26873);function O(e){let t=(0,c.I0)(),[n,o]=(0,a.useState)(!1),[s,h]=(0,a.useState)(!1),{totalWidgetsData:O=[],widgetTotalCount:b,pageRedux:A}=(0,c.v9)(e=>e.home),{userType:R}=(0,c.v9)(e=>e.userInfo),{agent:N,externalMessages:L={},earliestSlotEspotData:T,showActiveOrderWidget:P}=(0,c.v9)(e=>e.common),{activeOrderStatusEnable:x}=T,{notificationPanel:k={},rwdImgPathPrefix:S={}}=L,{baseUrl:C="https://cdn.dmart.in",iconsPath:Z="/images/icons"}=S,{isEnabled:D="false"}=k,[Y,B]=(0,a.useState)(!0),[H,M]=(0,a.useState)(!1),{homepageData:W={},refererUrl:X="",guestData:z={},userData:F={},customClick:q}=e,{homepage:G={}}=W,{widgets:J=[],context:K={},widgetCount:Q=""}=G,{seoMeta:V={}}=K,{seoTitle:$="",seoKeywords:ee="",seoDesc:et=""}=V;(0,a.useEffect)(()=>{B(!1),"true"===q&&(F&&Object.keys(F).length?g.Z.get({},"summary"):z&&Object.keys(z).length&&z.dm_token&&g.Z.get({},"summary")),async function(){m.Z.homepage(null,{page:2,size:l.vc.SIZE}).then(e=>{let{data:n}=e,{homepage:r}=n,{widgets:a=[]}=r;t((0,_.t)([{key:"widgetTotalCount",value:parseInt(Q,10)},{key:"totalWidgetsData",value:[...J,...a]},{key:"pageRedux",value:2}])),B(!1),M(!1)})}()},[]),(0,a.useEffect)(()=>{let{preferredPIN:e=""}=z,{preferredPIN:t=""}=F,n={};Object.keys(F).length?((n=v.mq.homepage_load).label=t,f.Z.publish(n)):((n=v.mq.homepage_load).label=e,f.Z.publish(n)),N===l.gN.MOBILE&&m.Z.checkHomepage(!0),async function(){if(F&&Object.keys(F).length){let e=await u.Z.getEligibility("all");if(e&&(null==e?void 0:e.data)){let{data:t}=e,{addOn:n,topUp:r}=t;(null==r?void 0:r.isEligible.toLowerCase())==="true"&&(f.Z.publish(v.mq.homepage_topupinfo),h(!0)),(null==n?void 0:n.isEligible.toLowerCase())==="true"&&(f.Z.publish(v.mq.homepage_addoninfo),o(!0))}}}()},[]),(0,a.useEffect)(()=>{(async function(){if(F&&Object.keys(F).length){let{isLoggedIn:e=!1}=F;if(("true"===e||!0===e)&&"true"===D){let e=await I.Z.get("summary",{},{silent:!1,errorHandler:!1}),{totalUnread:t=0}=e||{};U.Z.dispatch((0,E.tP)([{key:"totalUnreadNotification",value:t||0}]))}}})()},[D,F]),(0,a.useEffect)(()=>{(async function(){"true"===x&&F&&Object.keys(F).length&&await m.Z.getActiveOrder()})()},[x,F]);let en={name:$||y.b.title,type:"Corporation",url:X,description:et||y.b.desc,logo:"".concat(C).concat(Z,"/dmart_ready_logo.svg")},er=(0,a.useCallback)(()=>{let e=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement&&document.documentElement.scrollHeight||document.body.scrollHeight,r=document.documentElement.clientHeight||window.innerHeight,a=Math.ceil(e+r)>=n-l.uq[N];a&&Math.ceil(b/l.vc.SIZE)>A&&!1===Y&&(e=>{let n={page:A+1,size:l.vc.SIZE},r={},{page:a=0}=n;Number(a)>2&&(r={silent:!0}),e||(B(!0),M(!0),m.Z.homepage(null,n,r).then(e=>{let{data:n}=e,{homepage:r}=n,{widgets:a=[],widgetCount:o}=r;t((0,_.t)([{key:"widgetTotalCount",value:parseInt(o,10)},{key:"totalWidgetsData",value:[...O,...a]},{key:"pageRedux",value:A+1}])),B(!1),M(!1)}))})(!1)},[N,t,Y,A,O,b]);return(0,a.useEffect)(()=>(window.addEventListener("scroll",er),()=>{window.removeEventListener("scroll",er)}),[er]),(0,r.jsxs)("div",{className:"home-container",children:[(0,r.jsx)(i.Z,{data:{title:$,description:et,keywords:ee,ogTitle:$,ogDesc:et,ogUrl:X}}),(0,r.jsx)(p,{data:en}),(0,r.jsx)("h1",{className:"home-container-h1",children:y.b.title}),N===l.gN.WEB&&"true"===P?(0,r.jsx)(w.Z,{}):null,(0,r.jsx)(d.Z,{widgets:O,agent:N,user:F,isAddon:n,isTopup:s,userType:R}),H?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)("div",{className:"home-container-full-loader"})]}):[]]})}O.propTypes={homepageData:s().object,refererUrl:s().string},O.defaultProps={homepageData:{},refererUrl:""};var b=!0,A=O},89836:function(e,t,n){"use strict";var r=n(60377),a=n(13507),o=n(48982),s=n(78659),c=n(60378);let l=new class{async getAddonOrderDetails(){let e=(0,r.D)(o.Ud.get("".concat(s.default.API_URL,"/v1/secure/orders/addon")));return(0,a.n)(e,{})}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.Xg,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.get("".concat(s.default.API_URL,"/v1/secure/orders?page=").concat(e.page,"&size=").concat(e.size),t,t)}getById(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"true"===t?o.Ud.get("".concat(s.default.API_URL,"/v1/secure/orders/").concat(e,"?isArchivalOrder=").concat(t),n):o.Ud.get("".concat(s.default.API_URL,"/v1/secure/orders/").concat(e),n)}getOrderConfirmDetails(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.get("".concat(s.default.API_URL,"/v3/secure/orders/confirm/").concat(e,"?channel=web"),t)}getSavings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.Ud.get("".concat(s.default.API_URL,"/v1/secure/orders/savings"),e)}reorder(e){return o.Ud.post("".concat(s.default.API_URL,"/v1/secure/orders"),e)}cancelOrder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.put("".concat(s.default.API_URL,"/v1/secure/orders"),e,t)}createAddOnOrder(e){return o.Ud.post("".concat(s.default.API_URL,"/v1/secure/orders/addon"),e)}changeTimeSlot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.put("".concat(s.default.API_URL,"/v1/secure/orders/slot"),e,t)}getSlots(e){return o.Ud.post("".concat(s.default.API_URL,"/v2/secure/slots"),e)}getEligibility(e,t){return o.Ud.get("".concat(s.default.API_URL,"/v1/secure/orders/eligibility?profile=").concat(e),t)}getOrderBanner(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.Ud.get("".concat(s.default.API_URL,"/v3/espots/orderconfirmationbanner-site"),e)}removeOrderItems(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.post("".concat(s.default.API_URL,"/v3/secure/orders/cancelitem"),e,t)}getOrderList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.Xg,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.get("".concat(s.default.API_URL,"/v3/secure/orders/list?channel=web&page=").concat(e.page,"&size=").concat(e.size),t)}getOrderDetailsById(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"true"===t?o.Ud.get("".concat(s.default.API_URL,"/v3/secure/orders/details/").concat(e,"?isArchivalOrder=").concat(t,"&channel=web"),n):o.Ud.get("".concat(s.default.API_URL,"/v3/secure/orders/details/").concat(e,"?channel=web"),n)}getOrderShipmentSlots(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.get("".concat(s.default.API_URL,"/v3/secure/orders/shipment/slots?orderId=").concat(null==e?void 0:e.orderId,"&shipmentId=").concat(null==e?void 0:e.shipmentId),t)}changeShipmentTimeSlot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.put("".concat(s.default.API_URL,"/v3/secure/orders/shipment/slots"),e,t)}cancelShipment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.post("".concat(s.default.API_URL,"/v3/secure/orders/shipment/cancel"),e,t)}punchout(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.Ud.post("".concat(s.default.API_URL,"/v3/secure/payment/punchout"),e,t)}};t.Z=l}},function(e){e.O(0,[2962,7918,8177,9912,8608,1303,1749,9774,2888,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);