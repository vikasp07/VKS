<% layout("/layouts/boilerplate") %>
<!-- <style></style>

<div id="filters">
  <div class="scrollable-tabs-container">
    <div class="left-arrow">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-6 h-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M15.75 19.5 8.25 12l7.5-7.5"
        />
      </svg>
    </div>
    <div class="filter-container">
      <a class="filter active" href="/listings">
        <div><i class="fa-solid fa-house"></i></div>
        <p>ALL</p>
      </a>
      <!-- <a class="filter" href="/listings/filter/Trending">
        <div><i class="fa-solid fa-fire"></i></div>
        <p>Trending</p>
      </a> -->
      <!-- <a class="filter" href="/listings/filter/Iconic cities">
        <div><i class="fa-solid fa-mountain-city"></i></div>
        <p>Iconic cities</p>
      </a>
      <a class="filter" href="/listings/filter/Mountains">
        <div><i class="fa-solid fa-mountain"></i></div>
        <p>Mountains</p>
      </a>
      <a class="filter" href="/listings/filter/Castles">
        <div><i class="fa-brands fa-fort-awesome"></i></div>
        <p>Castles</p>
      </a>
      <a class="filter" href="/listings/filter/Amazing pools">
        <div><i class="fa-solid fa-person-swimming"></i></div>
        <p>Amazing pools</p>
      </a>
      <a class="filter" href="/listings/filter/Rooms">
        <div><i class="fa-solid fa-bed"></i></div>
        <p>Rooms</p>
      </a>
      <a class="filter" href="/listings/filter/Camping">
        <div><i class="fa-solid fa-campground"></i></div>
        <p>Camping</p>
      </a>
      <a class="filter" href="/listings/filter/Farms">
        <div><i class="fa-solid fa-cow"></i></div>
        <p>Farms</p>
      </a>
      <a class="filter" href="/listings/filter/Arctic">
        <div><i class="fa-regular fa-snowflake"></i></div>
        <p>Arctic</p>
      </a>
      <a class="filter" href="/listings/filter/Domes">
        <div><i class="fa-solid fa-igloo"></i></div>
        <p>Domes</p>
      </a>
      <a class="filter" href="/listings/filter/Boats">
        <div><i class="fa-solid fa-ship"></i></div>
        <p>Boats</p>
      </a>
    </div>
    <div class="right-arrow active">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        strokeWidth="{1.5}"
        stroke="currentColor"
        className="w-6 h-6"
      >
        <path
          strokeLinecap="round"
          strokeLinejoin="round"
          d="m8.25 4.5 7.5 7.5-7.5 7.5"
        />
      </svg>
    </div>
  </div>

  <div class="tax-toggle">
    <div class="form-check-reverse form-switch">
      <input
        class="form-check-input"
        type="checkbox"
        role="switch"
        id="flexSwitchCheckDefault"
      />
      <label class="form-check-label" for="flexSwitchCheckDefault"
        >Display total after taxes</label
      >
    </div>
  </div>
</div>
<div class="row row-cols-sm-1 row-cols-md-2 row-cols-lg-3  mt-3">
  <% for(listing of allItems) { %>
    <a href="/listings/<%= listing._id %>" class="listing-link">
      <div class="card listing-card">
        <img
          src="<%= listing.image.url %>"
          class="card-img-top"
          alt="listing"
          style="height: 20rem"
        />
        <div class="card-img-overlay"></div>
        <div class="card-body">
          <p class="card-text">
            <b><%= listing.title %> </b><br />
            <span class="price-info" data-base-price="<%= listing.price %>">
              &#8377; <%= listing.price.toLocaleString("en-IN") %> /night
            </span>
            <!-- <i class="tax-info"> &nbsp; &nbsp;+18% GST</i> -->
          </p>
        </div>
      </div>
    </a>
  <% } %> -->
</div> -->

<!-- 
<script>
  let taxSwitch = document.getElementById("flexSwitchCheckDefault");

taxSwitch.addEventListener("change", () => {
  updatePriceDisplay(taxSwitch.checked);
});

function updatePriceDisplay(isTaxSwitchOn) {
  let priceInfoElements = document.querySelectorAll(".price-info");

  priceInfoElements.forEach((priceInfo) => {
    const basePrice = parseFloat(priceInfo.dataset.basePrice);
    const totalPrice = isTaxSwitchOn ? calculateTotalPrice(basePrice) : basePrice;

    priceInfo.innerHTML = `&#8377; ${totalPrice.toLocaleString("en-IN")} /night`;

    if (isTaxSwitchOn) {
      priceInfo.innerHTML += ` <i class="tax"> &nbsp;with 18% GST</i>`;
    }
  });
}

// Function to calculate total price with GST
function calculateTotalPrice(basePrice) {
  const gstPercentage = 18;
  const gstAmount = (basePrice * gstPercentage) / 100;
  const totalPrice = basePrice + gstAmount;
  return totalPrice.toLocaleString("en-IN");
}

  // let taxSwitch = document.getElementById("flexSwitchCheckDefault");
  // taxSwitch.addEventListener("click", () => {
  //   let taxInfo = document.getElementsByClassName("tax-info");
  //   for (info of taxInfo) {
  //     if (info.style.display != "inline") {
  //       info.style.display = "inline";
  //     } else {
  //       info.style.display = "none";
  //     }
  //   }
  // });

  const tabs = document.querySelectorAll(".scrollable-tabs-container .filter-container a");
  const rightArrow = document.querySelector(
    ".scrollable-tabs-container .right-arrow svg"
  );
  const leftArrow = document.querySelector(
    ".scrollable-tabs-container .left-arrow svg"
  );
  const filterContainer = document.querySelector(
    ".scrollable-tabs-container .filter-container"
  );
  const leftArrowContainer = document.querySelector(
    ".scrollable-tabs-container .left-arrow"
  );
  const rightArrowContainer = document.querySelector(
    ".scrollable-tabs-container .right-arrow"
  );

  const removeAllActiveClasses = () => {
    tabs.forEach((tab) => {
      tab.classList.remove("active");
    });
  };

  
  tabs.forEach((tab) => {
    tab.addEventListener("click", (event) => {
      event.preventDefault();
      setActiveFilter(tab);
      window.location.href = tab.getAttribute("href");
    });
  });

  const setActiveFilter = (tab) => {
  removeAllActiveClasses();
  tab.classList.add("active");
  localStorage.setItem("activeFilter", tab.getAttribute("href"));
};

// Check if there's a stored active filter and set it on page load
document.addEventListener("DOMContentLoaded", () => {
  const storedFilter = localStorage.getItem("activeFilter");
  if (storedFilter) {
    const activeTab = document.querySelector(`.filter[href="${storedFilter}"]`);
    if (activeTab) {
      setActiveFilter(activeTab);
    }
  }
});


  const manageIcons = () => {
    if (filterContainer.scrollLeft >= 20) {
      leftArrowContainer.classList.add("active");
    } else {
      leftArrowContainer.classList.remove("active");
    }

    let maxScrollValue = filterContainer.scrollWidth - filterContainer.clientWidth - 20;
    // console.log("scroll width: " + filterContainer.scrollWidth);
    // console.log("client width: " + filterContainer.clientWidth);
    // console.log("max scroll value: " + maxScrollValue);
    // console.log("scroll left value: " + filterContainer.scrollLeft);

    if (filterContainer.scrollLeft >= maxScrollValue) {
      rightArrowContainer.classList.remove("active");
    } else {
      rightArrowContainer.classList.add("active");
    }
  };


  rightArrow.addEventListener("click", () => {
    console.log("clicked");
    filterContainer.scrollLeft += 200;
    setTimeout(() => {
      manageIcons();
    }, 500);
  });

  leftArrow.addEventListener("click", () => {
    console.log("clicked");
    filterContainer.scrollLeft -= 200;
    setTimeout(() => {
      manageIcons();
    }, 500);
  });

  filterContainer.addEventListener("scroll", manageIcons);

  let dragging = false;

  const drag = (e) => {
    if(!dragging) return;
    filterContainer.classList.add("dragging");
    filterContainer.scrollLeft -= e.movementX;
  }

  filterContainer.addEventListener("mousedown", () => {
    dragging = true
  })

  filterContainer.addEventListener("mousemove", drag);

  document.addEventListener("mouseup", () => {
    dragging = false;
    filterContainer.classList.remove("dragging");
  })

</script> -->







<div class="slideshow-container">
  <div class="mySlides fade">
    <div class="numbertext">1 / 3</div>
    <img src="./Images/panel4.webp" style="width: 100%" />
  </div>

  <div class="mySlides fade">
    <div class="numbertext">2 / 3</div>
    <img src="./Images/panel5.webp" style="width: 100%" />
  </div>

  <div class="mySlides fade">
    <div class="numbertext">3 / 3</div>
    <img src="./Images/panel6.jpg" style="width: 100%" />
  </div>
</div>
<br />

<div style="text-align: center">
  <span class="dot"></span>
  <span class="dot"></span>
  <span class="dot"></span>
</div>

<br />
<div id="imageContainer">
  <img id="displayedImage" src="./Images/panel4.webp" alt="box" />
</div>

<div class="shop-section">
  <div class="box1 box">
    <div class="box-content">
      <h2>GROCERY</h2>
      <div
        class="box-img"
        style="background-image: url('./Images/GROCEREY.jpg')"
      ></div>
      <a href="C:\Users\HOME\Desktop\Javascript\PROJECT\grocery.html"
        >SEE MORE</a
      >
    </div>
  </div>
  <div class="box2 box">
    <div class="box-content">
      <h2>VKS GROCERY</h2>
      <div
        class="box-img"
        style="background-image: url('./Images/VKS_GRCERY.jpg')"
      ></div>
      <a href="C:\Users\HOME\Desktop\Javascript\PROJECT\vks_grocery.html"
        >SEE MORE</a
      >
    </div>
  </div>
  <div class="box3 box">
    <div class="box-content">
      <h2>BEVERAGES</h2>
      <div class="box-img" style="background-image: url('./Images/box5.jpg')"></div>
      <a href="C:\Users\HOME\Desktop\Javascript\PROJECT\beverages.html"
        >SEE MORE</a
      >
    </div>
  </div>
  <div class="box4 box">
    <div class="box-content">
      <h2>PACKAGED FOOD</h2>
      <div
        class="box-img"
        style="background-image: url('./Images/PANEL3.jpg')"
      ></div>
      <a href="C:\Users\HOME\Desktop\Javascript\PROJECT\packaged_food.html"
        >SEE MORE</a
      >
    </div>
  </div>
  <div class="box5 box">
    <div class="box-content">
      <h2>HOME & KITCHEN</h2>
      <div
        class="box-img"
        style="background-image: url('./Images/PANEL2.png')"
      ></div>
      <a href="C:\Users\HOME\Desktop\Javascript\PROJECT\homeandkitchen.html"
        >SEE MORE</a
      >
    </div>
  </div>
  <div class="box6 box">
    <div class="box-content">
      <h2>PERSONAL CARE</h2>
      <div
        class="box-img"
        style="background-image: url('./Images/PERSONAL_CARE.jpg')"
      ></div>
      <a href="C:\Users\HOME\Desktop\Javascript\PROJECT\personal_care.html"
        >SEE MORE</a
      >
    </div>
  </div>
  <div class="box7 box">
    <div class="box-content">
      <h2>BEAUTY & COSMETICS</h2>
      <div class="box-img" style="background-image: url('./Images/box4.jpg')"></div>
      <a
        href="C:\Users\HOME\Desktop\Javascript\PROJECT\beautyandcosmetics.html"
        >SEE MORE</a
      >
    </div>
  </div>
  <div class="box8 box">
    <div class="box-content">
      <h2>SCHOOL SUPPLIES</h2>
      <div
        class="box-img"
        style="background-image: url('./Images/SCHOOL_SUPPLIES.jpg')"
      ></div>
      <a
        href="C:\Users\HOME\Desktop\Javascript\PROJECT\school_supplies.html"
        >SEE MORE</a
      >
    </div>
  </div>
</div>


<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

<script>
  const div = document.getElementById('search-select');

  div.addEventListener('change',function() {
    var selectedFile=this.value;
    if(selectedFile){
      window.location.href=selectedFile;
    }
  });

  function changeImage(value) {
    var imageSrc="box"+value+".jpg";
    document.getElementById('displayedImage').src=imageSrc;
  }

  const navopen = document.querySelector('button.openbtn');
  const navclose = document.querySelector('a.closebtn');
  navopen.addEventListener('click',() =>{
    document.getElementById("mySidebar").style.width = "250px";
    document.querySelector("body").style.marginLeft = "250px";
  });

  navclose.addEventListener('click', () =>{
    document.getElementById("mySidebar").style.width ="0";
    document.querySelector("body").style.marginLeft= "0";
  });

  // const navcloses= document.querySelector('a.closebtn');

  // navcloses.addEventListener('click', () =>{
  //   document.getElementById("mySidebar").style.width ="0";
  // });

  let slideIndex = 0;
  showSlides();

  function showSlides() {
    let i;
    let slides = document.getElementsByClassName("mySlides");
    let dots = document.getElementsByClassName("dot");
    for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
    }
    slideIndex++;
    if (slideIndex > slides.length) {
      slideIndex = 1
    }
    for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
    }
    slides[slideIndex-1].style.display = "block";
    dots[slideIndex-1].className += " active";
    setTimeout(showSlides, 2000); // Change image every 2 seconds
  }

</script>